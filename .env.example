# ============================================================================
# üöÄ BOT PACIFICA - CONFIGURA√á√ÉO COMPLETA
# ============================================================================
# Este arquivo cont√©m TODAS as vari√°veis de ambiente utilizadas pelo bot.
# Copie este arquivo para .env e ajuste os valores conforme necess√°rio.
# ============================================================================

# ============ CHAVES DE API E AUTENTICA√á√ÉO ============
MAIN_PUBLIC_KEY=
AGENT_PRIVATE_KEY_B58=
# Nota: Tamb√©m aceita AGENT_PRIVATE_KEY (compatibilidade)

# ============ ENDPOINTS DA EXCHANGE ============
API_ADDRESS=https://api.pacifica.fi/api/v1
WS_BASE_URL=wss://ws.pacifica.fi/ws

# ============ CONFIGURA√á√ÉO DE LOGS E DEBUG ============
# N√≠vel de log: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO
DEBUG_MODE=false

# ============ ESTRAT√âGIA PRINCIPAL ============
# Tipos dispon√≠veis:
# - "pure_grid": Grid cl√°ssico com range fixo
# - "market_making": Grid din√¢mico que se adapta ao mercado
# - "dynamic_grid": Grid adaptativo inteligente com ajustes autom√°ticos
# - "multi_asset": Scalping multi-asset b√°sico
# - "multi_asset_enhanced": Algoritmo avan√ßado com 5 indicadores t√©cnicos
STRATEGY_TYPE=dynamic_grid

# ============ CONFIGURA√á√ÉO B√ÅSICA DE TRADING ============
# S√≠mbolo principal para estrat√©gias de grid (BTC, ETH, SOL, etc.)
SYMBOL=SOL

# Alavancagem para c√°lculo de margem
LEVERAGE=10

# N√∫mero m√°ximo de ordens abertas simultaneamente
MAX_OPEN_ORDERS=20

# Verificar saldo antes de cada ordem?
CHECK_BALANCE_BEFORE_ORDER=true

# Intervalo entre rebalanceamentos (em segundos)
REBALANCE_INTERVAL_SECONDS=60

# Limpeza de ordens ao iniciar o bot
CLEAN_ORDERS_ON_START=false

# ============ CONFIGURA√á√ïES DE GRID TRADING ============

# N√∫mero total de n√≠veis do grid
GRID_LEVELS=8

# Tamanho de cada ordem em USD (valor notional)
ORDER_SIZE_USD=35

# Espa√ßamento entre n√≠veis (em porcentagem)
# Ex: 0.2 = 0.2% entre cada n√≠vel
GRID_SPACING_PERCENT=0.2

# Distribui√ß√£o do grid
# Op√ß√µes: "symmetric" (50/50), "bullish" (60% buy), "bearish" (60% sell)
GRID_DISTRIBUTION=symmetric

# Modo do grid (maker, taker, etc.)
GRID_MODE=maker

# ============ RESET PERI√ìDICO DO GRID ============
# Habilitar reset completo do grid periodicamente?
ENABLE_PERIODIC_GRID_RESET=true

# Intervalo para reset completo do grid (em minutos)
GRID_RESET_INTERVAL_MINUTES=60

# ============ GRID ADAPTATIVO ============
# Ajusta automaticamente o espa√ßamento baseado na volatilidade
ADAPTIVE_GRID=true
VOLATILITY_WINDOW=20
VOLATILITY_MULT_MIN=0.7
VOLATILITY_MULT_MAX=1.5

# ============ PURE GRID - CONFIGURA√á√ïES ESPEC√çFICAS ============
# (Apenas se STRATEGY_TYPE=pure_grid)

# Range de pre√ßos fixo para o grid
RANGE_MIN=90000
RANGE_MAX=110000

# Parar bot se pre√ßo sair do range?
RANGE_EXIT=true

# ============ MARKET MAKING GRID - CONFIGURA√á√ïES ============
# (Apenas se STRATEGY_TYPE=market_making)

# Percentual de movimento para deslocar o grid
GRID_SHIFT_THRESHOLD_PERCENT=1.0

# ============ DYNAMIC GRID - CONFIGURA√á√ïES AVAN√áADAS ============
# (Apenas se STRATEGY_TYPE=dynamic_grid)

# Threshold para ajustes din√¢micos do grid
DYNAMIC_THRESHOLD_PERCENT=1.0

# Dist√¢ncia m√°xima de ajuste do grid
MAX_ADJUSTMENT_DISTANCE_PERCENT=5.0

# Habilitar boost de volume em condi√ß√µes espec√≠ficas
VOLUME_BOOST_ENABLED=true

# ============ GERENCIAMENTO DE POSI√á√ïES E MARGEM ============

# Tamanho m√°ximo da posi√ß√£o em USD
MAX_POSITION_SIZE_USD=300

# Cancelamento autom√°tico de ordens em margem baixa
AUTO_CANCEL_ORDERS_ON_LOW_MARGIN=true
CANCEL_ORDERS_MARGIN_THRESHOLD=20        # Gatilho: margem < 20%
CANCEL_ORDERS_PERCENTAGE=30              # Cancelar 30% das ordens

# Redu√ß√£o autom√°tica de posi√ß√£o em margem cr√≠tica
AUTO_REDUCE_POSITION_ON_LOW_MARGIN=true
REDUCE_POSITION_MARGIN_THRESHOLD=10      # Gatilho: margem < 10%
REDUCE_POSITION_PERCENTAGE=20            # Vender 20% da posi√ß√£o

# Fechamento autom√°tico ao atingir limite de posi√ß√£o
AUTO_CLOSE_ON_MAX_POSITION=true

# Estrat√©gia de fechamento autom√°tico:
# "cancel_distant_orders" = apenas cancela ordens distantes (conservador)
# "force_partial_sell" = sempre vende parte da posi√ß√£o (agressivo)
# "hybrid" = abordagem combinada (recomendado)
AUTO_CLOSE_STRATEGY=hybrid

# Percentual da posi√ß√£o a vender no fechamento autom√°tico
AUTO_CLOSE_PERCENTAGE=20

# ============ GEST√ÉO DE RISCO - CICLOS E SESS√ïES ============

# Prote√ß√£o por ciclo (n√≠vel 1)
ENABLE_CYCLE_PROTECTION=true
GRID_CYCLE_STOP_LOSS_PERCENT=5.0
GRID_CYCLE_TAKE_PROFIT_PERCENT=8.0

# Prote√ß√£o de sess√£o (n√≠vel 2)
# ===== N√çVEL 2: PROTE√á√ÉO ACUMULADA =====
# Protege o PNL total da sess√£o (soma de todos os ciclos)

# Habilitar prote√ß√£o acumulada?
ENABLE_SESSION_PROTECTION=true

# Limite m√°ximo de perda em USD
GRID_SESSION_MAX_LOSS_USD=20.0      

# Limite m√°ximo de perda em porcentagem
GRID_SESSION_MAX_LOSS_PERCENT=10.0  

# Meta de lucro para a sess√£o em USD
GRID_SESSION_PROFIT_TARGET_USD=40.0 

# Meta de lucro para a sess√£o em porcentagem
GRID_SESSION_PROFIT_TARGET_PERCENT=10.0

# Intervalo de log de status (minutos)
GRID_LOG_PNL_EVERY_MINUTES=15  


# Configura√ß√µes de sess√£o alternativas (compatibilidade)
SESSION_STOP_LOSS_USD=100
SESSION_TAKE_PROFIT_USD=200
SESSION_MAX_LOSS_USD=200
SESSION_PROFIT_TARGET_USD=500

# A√ß√£o ao atingir limites: "pause" ou "shutdown"
GRID_ACTION_ON_LIMIT=pause
GRID_PAUSE_DURATION_MINUTES=120

# Intervalos de verifica√ß√£o e logging
GRID_CHECK_INTERVAL_SECONDS=30
GRID_SAVE_PNL_HISTORY=true
GRID_LOG_PNL_EVERY_MINUTES=15

# Debug do Risk Manager
RISK_MANAGER_DEBUG_MODE=false

# ============ ESTRAT√âGIAS MULTI-ASSET ============

# S√≠mbolos para trading multi-asset
# AUTO = busca todos os s√≠mbolos dispon√≠veis
# Ou especificar manualmente: BTC,ETH,SOL,AVAX (separados por v√≠rgula)
SYMBOLS=AUTO

# Sistema de blacklist para filtrar s√≠mbolos indesejados
SYMBOLS_USE_BLACKLIST=true
SYMBOLS_BLACKLIST=PUMP,kPEPE,FARTCOIN
SYMBOLS_MAX_COUNT=0                      # 0 = sem limite

# Configura√ß√µes b√°sicas multi-asset
POSITION_SIZE_USD=20
MAX_CONCURRENT_TRADES=3
ALLOW_MULTIPLE_PER_SYMBOL=false
PRICE_CHANGE_THRESHOLD=0.3
PRICE_CHECK_INTERVAL_SECONDS=15

# ============ STOP LOSS E TAKE PROFIT ============

# TP/SL autom√°ticos (Camada 2 de prote√ß√£o)
AUTO_CLOSE_ENABLED=true
USE_API_TP_SL=true                       # true = via API, false = monitoramento manual
STOP_LOSS_PERCENT=1.0
TAKE_PROFIT_PERCENT=1.5

# Trailing Stop (experimental)
TRAILING_STOP_ENABLED=false
TRAILING_STOP_PERCENT=0.5

# Tempo m√°ximo de posi√ß√£o (for√ßar fechamento)
MAX_POSITION_TIME_MINUTES=60

# ============ SISTEMA DE EMERG√äNCIA (CAMADA 3) ============
# Prote√ß√£o de √∫ltima inst√¢ncia quando outras falham

EMERGENCY_SL_PERCENT=3.0                 # Perda cr√≠tica
EMERGENCY_TP_PERCENT=5.0                 # Lucro extremo para prote√ß√£o
EMERGENCY_MAX_LOSS_TIME_MINUTES=15       # Tempo m√°ximo em perda
EMERGENCY_CHECK_INTERVAL_SECONDS=10      # Frequ√™ncia de verifica√ß√£o

# ============ ESTRAT√âGIA ENHANCED - INDICADORES T√âCNICOS ============
# (Apenas se STRATEGY_TYPE=multi_asset_enhanced)

# Configura√ß√µes de qualidade do sinal
ENHANCED_MIN_SIGNAL_QUALITY=65           # Qualidade m√≠nima (0-100)
ENHANCED_MIN_CONFIDENCE=75               # Confian√ßa m√≠nima (0-100)
ENHANCED_USE_RSI_FILTER=true             # Filtrar por RSI extremos
ENHANCED_MAX_VOLATILITY=4.0              # Volatilidade m√°xima permitida (%)
ENHANCED_MIN_HISTORY=25                  # Per√≠odos m√≠nimos para an√°lise

# ============ NOTIFICA√á√ïES TELEGRAM ============
# Sistema de notifica√ß√µes resiliente

TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Configura√ß√µes avan√ßadas do Telegram
TELEGRAM_TIMEOUT_SECONDS=45
TELEGRAM_CONNECT_TIMEOUT=20
TELEGRAM_MAX_RETRIES=5
TELEGRAM_RETRY_DELAY_SECONDS=3.0
TELEGRAM_RATE_LIMIT_SECONDS=2.0

# ============ PROTE√á√ÉO UNIVERSAL: TEND√äNCIA DE MARGEM ============
# Sistema avan√ßado de prote√ß√£o que monitora quedas s√∫bitas de margem
# Aplica-se a TODAS as estrat√©gias (grid, multi-asset, etc.)

# Habilitar prote√ß√£o por tend√™ncia de margem?
ENABLE_MARGIN_TREND_PROTECTION=true

# Queda m√°xima permitida em % no per√≠odo analisado
MARGIN_DROP_THRESHOLD_PERCENT=15.0

# Per√≠odo de an√°lise hist√≥rica em minutos
MARGIN_HISTORY_MINUTES=3

# A√ß√£o a ser tomada quando limite √© atingido:
# 'pause' = pausa tempor√°ria do bot
# 'cancel_orders' = cancela todas as ordens ativas (recomendado)
# 'reduce_positions' = reduz posi√ß√µes em margem cr√≠tica
# 'shutdown' = desliga o bot completamente
MARGIN_TREND_ACTION=cancel_orders

# Verifica√ß√£o a cada X segundos
MARGIN_TREND_CHECK_INTERVAL=30

# Dura√ß√£o da pausa em minutos (se action=pause)
MARGIN_TREND_PAUSE_MINUTES=30

# Habilitar logs detalhados da prote√ß√£o?
MARGIN_TREND_LOG_ENABLED=true

# Habilitar modo de depura√ß√£o do gerenciador de risco?
RISK_MANAGER_DEBUG_MODE=false

# Habilitar modo de depura√ß√£o geral?
DEBUG_MODE=false

# ============================================================================
# üìä SISTEMA DE ANALYTICS (Data-Driven Decision Making)
# ============================================================================

# Ativar coleta de m√©tricas internas para an√°lise de performance
# true = Coleta dados de sinais, execu√ß√µes, fechamentos em JSON
# false = Sistema desativado (zero overhead)
ANALYTICS_ENABLED=true

# IMPORTANTE:
# - Dados salvos em: data/analytics/[estrat√©gia]_[ano]_[m√™s].json
# - Rota√ß√£o autom√°tica mensal
# - Para analisar: python scripts/analyze_performance.py
# - Zero impacto na performance se enabled=false
# - Compat√≠vel com todas as estrat√©gias

# DADOS COLETADOS (quando enabled=true):
# 
# Para Multi-Asset:
#   - Sinais analisados (score, indicadores, confian√ßa)
#   - Decis√µes (executado vs rejeitado + motivo)
#   - Execu√ß√µes (pre√ßo entrada, TP/SL, quantidade)
#   - Fechamentos (pre√ßo sa√≠da, motivo, PnL, dura√ß√£o)
#
# Para Grid:
#   - Execu√ß√µes de ordens do grid
#   - Rebalanceamentos (motivo, ordens criadas/canceladas)
#   - N√≠veis mais/menos lucrativos
#
# AN√ÅLISES DISPON√çVEIS:
#   - Correla√ß√£o score √ó resultado
#   - Indicadores mais relevantes
#   - Motivos de rejei√ß√£o frequentes
#   - Performance por s√≠mbolo
#   - Motivos de sa√≠da (TP/SL/TIME)
#   - Recomenda√ß√µes autom√°ticas

# EXEMPLO DE USO:
# 1. Configurar: ANALYTICS_ENABLED=true
# 2. Rodar bot por 1-2 semanas
# 3. Analisar: python scripts/analyze_performance.py
# 4. Ajustar par√¢metros baseado em dados reais
# 5. Testar mudan√ßas e comparar resultados
# ============================================================================